# 服务全链路压测设计

## 什么是全链路压测设计

基于线上真实环境和实际业务场景，通过模拟海量的用户请求来对整个系统链路进行压力测试。

## 全链路压力测试的目的

* 验证新上限功能的稳定性
* 验证峰值流量下服务的稳定性和伸缩性
* 对线上服务进行更准确的容量评估
* 找到系统的瓶颈进行优化

## 压测工具

JMeter

TCPCopy

{% embed url="https://github.com/metersphere/metersphere" %}



## 压测极限标准

机器load average不超过cpu核数\*0.6。

网卡流量不超过网卡容量的60%

请求超时不超过十万分之一

QPS不低于预估的85%，否则需要优化。

## 压测方案

### 复用线上环境压测

![](../.gitbook/assets/image%20%28169%29.png)

### 构造全套线上环境

![](../.gitbook/assets/image%20%28170%29.png)

### 基于真实流量调配进行线上压测

![](../.gitbook/assets/image%20%28171%29.png)

### 全链路压测方案

之前的压测方案很难全面对整个服务集群进行压测。以局部结果推算整个集群的健康情况，往往会以偏概全无法评估整个系统的真实性能水平。所以需要通过全链路压测的方式来评估系统的整体水平。



