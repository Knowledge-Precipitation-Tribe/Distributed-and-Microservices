# 高并发设计

## 服务性能评估

* 吞吐量
* 响应延迟

## 服务性能优化目标

* 缩短响应时间
* 提高并发数
* 让系统处于合理状态

![](../../.gitbook/assets/image%20%28143%29.png)

## 优化手段

### 空间换时间

缓存复用计算结构，降低时间开销。

### 时间换空间

压缩数据，根据APP的请求进行分类。

### 找到系统的瓶颈

优化系统的关键路径，但是也要防止低QPS的服务拖垮系统。

## 优化层次

### 架构设计层次

关注系统控制，数据流程。对系统的合理拆分使得系统整体负载更加均衡。

### 算法逻辑层次

关注算法的选择是否高效。

### 代码优化层次

关注代码的细节，是否创建过多的对象，循环遍历是否合理。

## 应用场景

### 秒杀系统

用户的瞬间涌入，但是可能大部分请求是无效的，我们要分层进行拦截使得落到与数据库交互的请求数量尽可能的小。

### 微博

明星发微博，不同时推给所有用户，可以先推给较为活跃的用户，其他不活跃的用户登陆后再逐步拉取信息，或者分批次推送消息。

