# 长轮询与短轮询

## 什么是轮询

所谓轮询，即是在一个循环周期内不断发起请求来得到数据的机制。只要有请求的的地方，都可以实现轮询，譬如各种事件驱动模型。它的长短是在于某次请求的返回周期。

## 什么是长轮询

长轮询是在请求的过程中，若是服务器端数据并没有更新，那么则将这个连接挂起，直到服务器推送新的数据，再返回，然后再进入循环周期。

1. 长轮询是服务器收到请求后如果有数据, 立刻响应请求;
2. 如果没有数据就会 hold 一段时间,这段时间内如果有数据立刻响应请求;
3. 如果时间到了还没有数据, 则响应 http 请求;浏览器受到 http 响应后立在发送一个同样http 请求查询是否有数据;

缺点:

* 浏览器端对统一服务器同时连接有最大限制, 最好同一用户只存在一个长轮询;
* 服务器端没有数据 hold 住连接时会造成浪费, 容易产生服务器瓶颈;

## 什么是短轮询

短轮询指的是在循环周期内，不断发起请求，每一次请求都立即返回结果，根据新旧数据对比决定是否使用这个结果。

1. 短轮询是服务器收到请求不管是否有数据都直接响应请求
2. 受到响应隔一段时间在发送同样的请求查询是否有数据;

缺点:

* 实时性低

## 轮询与长连接

由上可以看到，长短轮询的理想实现都应当基于长连接，否则若是循环周期太短，那么服务器的荷载会相当重；

当然，即便是在长连接下，访问人数过多，长短轮询都有可能造成服务器的瞬时访问量庞大，这就需要一些相应的优化实践了。

